---
title: "Dartmouth_docs"
output:
  html_notebook: default
  github_document: default
date: '`r Sys.Date()`'
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, message=FALSE}
library(tidyverse); library(stringr); library(foreign); library(QuantPsyc); library(psych)
```

```{r}
dart_raw <- read.dbf("../dropbox/capstone/data/raw/t_103113_1.dbf", as.is = TRUE)
names(dart_raw) <- names(dart_raw) %>% str_to_lower()
```

```{r}
dart_nyc <- 
  dart_raw %>% 
  as_data_frame() %>% 
  select(county, tract, tg_doc:to_nimg, tpa_pc, tpa_pc_3sp, tpa_pc_ob, tpa_pc_oth, tfqhc10, tbene_n10) %>%
  filter(county %in% c("36005", "36047", "36061", "36081", "36085")) %>% 
  transform(
    geoid = str_c(county, tract),
    boro = recode(county, 
    		"36005" = "Bronx", "36047" = "Brooklyn", "36061" = "Manhattan", 
    		"36081" = "Queens", "36085" = "Staten Island"),
    medicare_denom = tbene_n10
  ) %>% 
  mutate_if(is.double, funs(if_else(. %in% c(-99, -999), NA_real_, .)))

head(dart_nyc)
```
```{r}
describeBy(dart_nyc$tg_doc, group = dart_nyc$boro)

tapply(dart_nyc$tg_doc, dart_nyc$boro, FUN = mean)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
